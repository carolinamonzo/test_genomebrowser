<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test_debug_hg38_SQANTI3_Hub - SQANTI3 Transcriptome Analysis Results</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
        h1 { color: #333; }
        h2 { color: #555; }
        ul { list-style-type: disc; margin-left: 20px; }
        ol { list-style-type: decimal; margin-left: 20px; }
        code { background-color: #f4f4f4; padding: 2px 4px; border-radius: 4px; }
        .filter-section { background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .filter-control { margin: 10px 0; }
        .filter-control label { display: inline-block; width: 150px; font-weight: bold; }
        .filter-control select, .filter-control input { padding: 5px; border: 1px solid #ccc; border-radius: 4px; width: 200px; }
        .filter-button { background-color: #007cba; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 10px 5px; }
        .filter-button:hover { background-color: #005a87; }
        .color-box { display: inline-block; width: 20px; height: 20px; margin-right: 10px; border: 1px solid #ccc; }
        .legend { margin: 20px 0; }
        .legend-item { margin: 10px 0; }
        .score-info { background-color: #e7f3ff; padding: 15px; border-radius: 6px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>test_debug_hg38_SQANTI3_Hub</h1>
    <p>This hub displays SQANTI3 transcriptome analysis results for the hg38 genome assembly.</p>
    
    <div class="score-info">
        <h3>üéØ Score-Based Filtering</h3>
        <p><strong>Transcripts are encoded with classification data in the score field:</strong></p>
        <ul>
            <li><strong>950-975:</strong> Full-splice Match (FSM) + coding bonus</li>
            <li><strong>850-875:</strong> Incomplete-splice Match (ISM) + coding bonus</li>
            <li><strong>750-775:</strong> Novel In Catalog (NIC) + coding bonus</li>
            <li><strong>650-675:</strong> Novel Not In Catalog (NNC) + coding bonus</li>
            <li><strong>550-575:</strong> Genic + coding bonus</li>
            <li><strong>450-475:</strong> Antisense + coding bonus</li>
            <li><strong>350-375:</strong> Fusion + coding bonus</li>
            <li><strong>250-275:</strong> Intergenic + coding bonus</li>
            <li><strong>150-175:</strong> Genic Intron + coding bonus</li>
        </ul>
        <p><em>Note: Add 25 points for coding transcripts, 0 for non-coding</em></p>
    </div>
    
    <div class="filter-section">
        <h2>üîç Interactive Filtering Interface</h2>
        <p>Use the UCSC Genome Browser's built-in filtering capabilities:</p>
        
        <div class="filter-control">
            <label>Filter by Score Range:</label>
            <select id="scoreFilter">
                <option value="">All Scores</option>
                <option value="950-975">Full-splice Match (950-975)</option>
                <option value="850-875">Incomplete-splice Match (850-875)</option>
                <option value="750-775">Novel In Catalog (750-775)</option>
                <option value="650-675">Novel Not In Catalog (650-675)</option>
                <option value="550-575">Genic (550-575)</option>
                <option value="450-475">Antisense (450-475)</option>
                <option value="650-675">Fusion (350-375)</option>
                <option value="250-275">Intergenic (250-275)</option>
                <option value="150-175">Genic Intron (150-175)</option>
            </select>
        </div>
        
        <div class="filter-control">
            <label>Filter by Coding Status:</label>
            <select id="codingFilter">
                <option value="">All Transcripts</option>
                <option value="coding">Coding Only (scores ending in 25)</option>
                <option value="noncoding">Non-coding Only (scores ending in 0)</option>
            </select>
        </div>
        
        <button class="filter-button" onclick="applyFilters()">Apply Filters</button>
        <button class="filter-button" onclick="clearFilters()">Clear Filters</button>
        
        <div id="filterInstructions" style="margin-top: 20px; padding: 15px; background-color: #fff3cd; border-radius: 6px;">
            <h4>üìã How to Use Filters in UCSC Genome Browser:</h4>
            <ol>
                <li>In the UCSC Genome Browser, right-click on the SQANTI3 track</li>
                <li>Select "Filter" from the context menu</li>
                <li>Use the score-based filtering options above</li>
                <li>You can also filter by clicking on individual transcripts to see their details</li>
            </ol>
        </div>
    </div>
    
    <h2>üé® Color Coding</h2>
    <p>Transcripts are colored by their <code>structural_category</code>, using the same color scheme as SQANTI3:</p>
    <div class="legend">
        <div class="legend-item"><span class="color-box" style="background-color:rgb(107,174,214);"></span>Full-splice Match (FSM)</div>
        <div class="legend-item"><span class="color-box" style="background-color:rgb(252,141,89);"></span>Incomplete-splice Match (ISM)</div>
        <div class="legend-item"><span class="color-box" style="background-color:rgb(120,198,121);"></span>Novel In Catalog (NIC)</div>
        <div class="legend-item"><span class="color-box" style="background-color:rgb(238,106,80);"></span>Novel Not In Catalog (NNC)</div>
        <div class="legend-item"><span class="color-box" style="background-color:rgb(150,150,150);"></span>Genic</div>
        <div class="legend-item"><span class="color-box" style="background-color:rgb(102,194,164);"></span>Antisense</div>
        <div class="legend-item"><span class="color-box" style="background-color:rgb(218,165,32);"></span>Fusion</div>
        <div class="legend-item"><span class="color-box" style="background-color:rgb(233,150,122);"></span>Intergenic</div>
        <div class="legend-item"><span class="color-box" style="background-color:rgb(65,182,196);"></span>Genic Intron</div>
    </div>
    
    <h2>üìä Classification Data</h2>
    <p>The original SQANTI3 classification file (hg38_classification.txt) is included for reference and detailed analysis.</p>
    <p>This file contains all the detailed classification information for each transcript.</p>
    
    <h2>üöÄ Usage Instructions</h2>
    <p>To use this hub in the UCSC Genome Browser:</p>
    <ol>
        <li>Upload all files in this directory to a web-accessible location</li>
        <li>In the UCSC Genome Browser, go to <strong>My Data ‚Üí Track Hubs</strong></li>
        <li>Enter the URL to your <code>hub.txt</code> file</li>
        <li>Select the appropriate genome assembly</li>
        <li>The SQANTI3 tracks will appear in your track list</li>
        <li>Use the filtering interface above to explore specific transcript categories</li>
    </ol>
    
    <script>
        function applyFilters() {
            const scoreFilter = document.getElementById('scoreFilter').value;
            const codingFilter = document.getElementById('codingFilter').value;
            
            let instructions = '<h4>üìã Filter Instructions for UCSC Genome Browser:</h4><ol>';
            
            if (scoreFilter) {
                instructions += '<li>Right-click on the SQANTI3 track and select "Filter"</li>';
                instructions += '<li>Use score range: ' + scoreFilter + '</li>';
            }
            
            if (codingFilter) {
                instructions += '<li>Filter by coding status: ' + codingFilter + '</li>';
            }
            
            instructions += '<li>Click "Apply" to see filtered results</li></ol>';
            
            document.getElementById('filterInstructions').innerHTML = instructions;
        }
        
        function clearFilters() {
            document.getElementById('scoreFilter').value = '';
            document.getElementById('codingFilter').value = '';
            document.getElementById('filterInstructions').innerHTML = 
                '<h4>üìã How to Use Filters in UCSC Genome Browser:</h4><ol>' +
                '<li>In the UCSC Genome Browser, right-click on the SQANTI3 track</li>' +
                '<li>Select "Filter" from the context menu</li>' +
                '<li>Use the score-based filtering options above</li>' +
                '<li>You can also filter by clicking on individual transcripts to see their details</li></ol>';
        }
    </script>
</body>
</html>